<!DOCTYPE html>
<!-- 
[ES6-重點紀錄] 箭頭函數 Arrow Function - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天
https://ithelp.ithome.com.tw/articles/10195669
 -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="button" value="fn" id="button">
    <script>
// 使用 addEventListener 監聽事件
var button = document.querySelector('#button');
var fn_arrow = () => {
  // 建立 function 時 this 指向 Window
    console.log(this.constructor.name);  // 執行 function 時 this 指向 Window
};
var fn = function(){
  // 建立 function 時 this 指向 Window
    console.log(this.constructor.name);  // 執行 function 時 this 指向 HTMLButtonElement
};
button.addEventListener('click', fn_arrow);
button.addEventListener('click', fn);


function Timer() {
    this.s1 = 0;
    this.s2 = 0;

    // 箭頭函數，會綁定外層定義的 this
    setInterval(() => this.s1++, 100);

    // 一般函數，指向正在運作自己的函數
    setInterval(function () {
        this.s2++;
    }, 100);
}

const timer = new Timer();

// 過 0.3 秒後觀察 timer.s1 與 timer.s2 的變化
setTimeout(() => console.log('s1: ', timer.s1), 350);
setTimeout(() => console.log('s2: ', timer.s2), 350);
// s1: 3
// s2: 0


let people = {
    name: 'Bob'
}
const fn_arrow2 = () => {
    console.log(this);
}
const fn2 = function () {
    console.log(this);
}
fn_arrow2.call(people); // 箭頭函數，this 依然還是 window 物件
fn2.call(people);  // 一般函數，this 則改變成 people 物件
    </script>
</body>
</html>